<% if @involine.errors.present? %>
  toastr.error('<%= j error_messages_for(@involine) %>');
  $("#messages").show();
  $("#messages").html('<div id="flash_notice" class="alert alert-error"><%= j error_messages_for(@involine) %></div>');
  $("#messages").fadeOut(4000);
<% else %>
  $("#invoice_<%= @invoice.id %>_involines").append('<%= j render @involine %>');
  $("#invoice_<%= @invoice.id %>_totals").html('<%= j render "financor/invoices/totals", invoice: @invoice %>');
  //$('#new_involine').each(function() { this.reset(); });
  toastr.info('<%= j flash[:notice] %>');
  $("#messages").show();
  $("#messages").html('<div id="flash_notice" class="alert alert-notice"><%= j flash[:notice] %></div>');
  $("#messages").fadeOut(5000);
  $('#modalWindow').modal('hide');
<% end %>

// (function) {
// <% if @involine.errors.present? %>
//   App.showErrorMessages(<%= j error_messages_for(@involine) %>);
// <% else %>
//   App.showInfoMessages(<%= j flash[:notice] %>);
//   $("#invoice_<%= @invoice.id %>_involines").append('<%= j render @involine %>');
//   $("#invoice_<%= @invoice.id %>_totals").html('<%= j render "financor/invoices/totals", invoice: @invoice %>');
//   //$('#new_involine').each(function() { this.reset(); });
//   $('#modalWindow').modal('hide');
// <% end %>
// }